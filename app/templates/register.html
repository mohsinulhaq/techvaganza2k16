{% extends "base.html" %}

{% block title %}
  Register
{% endblock %}

{% block content %}
  <div class="wrapper">
    <div class="register-background">
      <div class="filter-black"></div>
      <div class="container">
        <div class="row">
          <div class="col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3 col-xs-10 col-xs-offset-1 ">
            <div class="register-card">

              <h3 class="title animated infinite pulse">Sign Up</h3>

              <form class="register-form" method="POST">
                <label>Full Name</label>
                <input type="text" class="form-control" name="name" placeholder="name" required>


                <label>Email</label>
                <div class="form-group">
                  <input type="email" class="form-control email" placeholder="Email" name="email" autocomplete="off"
                         required>
                </div>

                <div class="check-validation" style="display: none;">
                  <i class="fa fa-cog fa-spin" aria-hidden="true"></i>
                  <i class="fa fa-check" aria-hidden="true" style="display: none; color: green;"></i>
                  <div style="display: none; color:red;">
                    <i class="fa fa-times" aria-hidden="true"></i>Account already exists
                  </div>
                </div>

                <label>Password</label>
                <input type="password" class="form-control" placeholder="Password" name="password" required>

                <label>Phone No.</label>
                <input type="number" class="form-control" placeholder="Cell no." name="cell" required>

                <label class="radio">
                  <span class="icons">
                    <span class="first-icon fa fa-circle-o fa-base"></span>
                    <span class="second-icon fa fa-dot-circle-o fa-base"></span>
                  </span>
                  <input type="radio" name="gender" data-toggle="radio" value="MALE" required>
                  <i></i>Male
                </label>

                <label class="radio">
                  <span class="icons">
                    <span class="first-icon fa fa-circle-o fa-base"></span>
                    <span class="second-icon fa fa-dot-circle-o fa-base"></span>
                  </span>
                  <input type="radio" name="gender" data-toggle="radio" value="FEMALE">
                  <i></i>Female
                </label>

                <label>College</label>
                <input type="text" class="form-control" placeholder="College" name="college" required>

                <label>Batch</label>
                <input type="number" class="form-control" placeholder="Batch" name="batch" required>

                <label>Branch</label>
                <input type="text" class="form-control" placeholder="Branch" name="branch" required>

                <input class="btn btn-danger btn-block register" type="submit" value="Register">

              </form>
              <div class="forgot">
                <a href="{{ url_for('authentication.reset_password') }}" class="btn btn-simple btn-danger">Forgot
                  password?</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="footer register-footer text-center">
        <h6 style="color: white;">&copy; Techvaganza 2k16</h6>
      </div>
    </div>
  </div>

{% endblock %}

{% block scripts %}
  <script src="{{ url_for('static', filename='js/ct-paper-radio.js') }}"></script>
  <script src="{{ url_for('static', filename='js/ct-paper.js') }}"></script>
  <script>
    $('.email').focusout(function() {
      if (this.checkValidity()) {
        $.get({
          beforeSend: function() {
            $('.check-validation').show();
            $('.fa-cog').show();
          },
          url: '/api/check-registration/' + $(this).val().trim(),
          success: function(response) {
            if (response.success) {
              $('.email').parent().removeClass('has-success')
                                  .addClass('has-error');
              $('.fa-cog').hide();
              $('.fa-check').hide();
              $('.fa-times').parent().show();
              $('.register').prop('disabled', true);

            } else {
              $('.email').parent().removeClass('has-error')
                                  .addClass('has-success');
              $('.fa-cog').hide();
              $('.fa-times').parent().hide();
              $('.fa-check').show();
              $('.register').prop('disabled', false);
            }
            if (response.message) {
              console.log(response.message);
            }
          }
        });
      } else {
        $('.check-validation').hide();
        $('.email').parent().removeClass('has-error has-success');
      }
    });
  </script>
{% endblock %}
